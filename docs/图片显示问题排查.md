# 图片显示问题排查指南

## 问题现象
保存后图片没有显示

## 可能的原因和解决方案

### 1. 检查图片是否真正上传成功

**检查方法：**
- 查看编辑页面中的图片路径显示（现在会显示完整路径）
- 检查 `static/images/` 目录下是否有新文件

**解决方案：**
- 如果没有新文件，说明上传失败
- 检查文件格式是否支持（JPG、PNG、GIF、WEBP）
- 检查文件大小是否超过5MB

### 2. 检查图片路径是否正确

**检查方法：**
- 在编辑页面查看图片路径是否以 `/static/images/` 开头
- 使用浏览器直接访问图片URL

**解决方案：**
- 正确的路径格式：`/static/images/dishes/xxx.jpg`
- 如果路径不正确，重新上传图片

### 3. 检查浏览器缓存

**检查方法：**
- 按 F12 打开开发者工具
- 查看 Network 面板，看图片请求是否成功
- 查看 Console 面板，看是否有错误信息

**解决方案：**
- 强制刷新页面（Ctrl+F5）
- 清除浏览器缓存
- 使用无痕模式测试

### 4. 检查服务器静态文件配置

**检查方法：**
- 确认Flask应用能正确服务静态文件
- 测试访问 `/static/css/style.css` 是否正常

**解决方案：**
- 确保Flask应用正确配置了static文件夹
- 检查文件权限设置

### 5. 检查图片文件完整性

**检查方法：**
- 直接打开 `static/images/` 目录中的图片文件
- 查看文件大小是否正常（不为0字节）

**解决方案：**
- 如果文件损坏，重新上传
- 检查磁盘空间是否充足

## 调试步骤

### 步骤1：检查上传状态
1. 上传图片后查看是否有成功提示
2. 检查编辑页面是否显示新的图片路径

### 步骤2：检查文件系统
```bash
# 查看图片目录
dir static\images\dishes\
dir static\images\logos\
dir static\images\banners\
```

### 步骤3：检查浏览器
1. 打开开发者工具（F12）
2. 刷新页面
3. 查看Network面板中的图片请求
4. 如果图片请求失败，查看错误代码

### 步骤4：手动测试
1. 复制图片路径
2. 在浏览器地址栏直接访问
3. 例如：`http://localhost:5000/static/images/logos/xxx.jpg`

## 常见错误和解决方案

### 错误1：404 Not Found
- **原因**：图片文件不存在或路径错误
- **解决**：检查文件是否存在，重新上传

### 错误2：403 Forbidden
- **原因**：文件权限问题
- **解决**：检查文件权限设置

### 错误3：图片显示破损
- **原因**：文件上传不完整或格式问题
- **解决**：重新上传图片，检查原始文件

### 错误4：缓存问题
- **原因**：浏览器缓存了旧图片
- **解决**：强制刷新或清除缓存

## 预防措施

1. **上传前检查**：
   - 确认文件格式正确
   - 确认文件大小合适
   - 确认文件名不包含特殊字符

2. **上传后验证**：
   - 查看成功提示信息
   - 检查编辑页面显示
   - 测试前端页面显示

3. **定期维护**：
   - 清理无用的图片文件
   - 检查磁盘空间
   - 备份重要图片

## 技术支持

如果以上方法都无法解决问题，请：

1. 记录具体的错误信息
2. 截图保存问题现象
3. 提供浏览器开发者工具的错误信息
4. 说明操作步骤和环境信息

---

**注意**：现在编辑页面会显示完整的图片路径，这有助于诊断问题。如果图片不显示，首先检查路径是否正确。 